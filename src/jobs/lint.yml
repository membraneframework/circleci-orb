description: >
  Runs linting and static analysis tools for the project

executor:
  name: docker_membrane
  mix_env: dev

steps:
  - checkout
  - get_mix_deps
  - use_build_cache:
      env: dev
      regenerate: true
      before-save:
        - run: mix compile
  - run: mix format --check-formatted
  - run: mix credo
  - run: mix docs && mix docs 2>&1 | (! grep -q "warning:")
  - run_dialyzer
